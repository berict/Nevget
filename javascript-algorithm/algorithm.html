<html>
<body>
    <p id="result">NULL</p>
    <br>

    <button onclick="calculate()">Calculate</button>
    <br>

    <canvas id="canvas" width="1000" height="100" style="margin-top: 100px"></canvas>

    <script type="text/javascript">
        var day = 0;
        var rate = 0;
        var level = 1;
        var last_interval_date = 0;
        
        var score = prompt("Enter game score 0 <= x <= 10");
        score = 1.423 + (score * 0.095);

        function calculate() {
            var e = 2.71828182;

            rate = (Math.pow(e, -(day / (score * (Math.pow(level, 2)))))) * 100;
            document.getElementById("result").innerHTML = "Day " + Math.round(day + last_interval_date) + ", Rate " + rate.toFixed(5) + "%";
            drawCanvas();

            if (rate <= 90) {
                sendEmail(level, (day + last_interval_date), age);
                level++;
                last_interval_date += day;
                day = 0;
            }
            day += 1;
        }

        function sendEmail(level, x, age) {
            alert("Email sent : level " + level + ", day " + Math.round(x) + ", age " + age);
        }

        function drawCanvas() {
            var canvas = document.getElementById('canvas');
            var context = canvas.getContext('2d');

            context.fillRect((day + last_interval_date) * 2, 100 - Math.round(rate), 2, 2);
        }
    </script>
</body>
</html>